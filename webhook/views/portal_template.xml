<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id = "portal_layout_inherit"
              inherit_id = "portal.portal_layout">
        <xpath expr="//div[@class='o_portal_my_security mt-3']" position="after">
            <div class = "o_portal_my_webhooks mt-3">
                <h4>Webhooks</h4>
                <hr class="mt-1 mb-1"/>
                <a href="/my/webhook/"><i class="fa fa-pencil mx-1"/>Manage Webhooks</a>
            </div>
        </xpath>
    </template>

    <template id = "portal_my_webhook">
        <t t-call = "website.layout">
            <div class="oe_structure oe_empty oe_structure_not_nearest" id="oe_structure_portal_my_webhook"/>
            <div class="container pt-2">
                <h5>Webhooks</h5>
                <div class="d-flex justify-content-center">
                     <div id = "webhook_table" >
                    <table id = "sortingTable" class = "mb16 table w-auto">
                        <thead>
                            <tr class = 'table-primary'>
                                <th>Event</th>
                                <th>Method</th>
                                <th class = "th-lg">URL</th>
                                <th class = "w-1000">Auth</th>
                                <th>Status</th>
                                <th>Description</th>
                                <th>Created<button class = "fa fa-plus text-primary o_portal_new_subscription"/></th>
                                <th/>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach = "request.env.user.webhook_subscriptions" t-as = "webhook_subscription">
                                <td><button class = "no-decoration o_portal_edit_subscription" t-att-id="webhook_subscription.id"><span t-field="webhook_subscription.webhook"/></button></td>
                                <td>POST</td>
                                <td><span t-field="webhook_subscription.webhook_url"/></td>
                                <td>Basic</td>
                                <td>Active</td>
                                <td></td>
                                <td><span t-field="webhook_subscription.create_date"/></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                </div>

            </div>

        </t>
    </template>
</odoo>